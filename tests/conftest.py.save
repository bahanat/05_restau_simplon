import pytest

from sqlmodel import Session, SQLModel, create_engine

from app.models import commandes_et_produits, users_et_roles
from tests.core.config import settingsengine = create_engine(settings.DATABASE_URL, connect_args={"check_same_thread": False})

engine = create_engine(settings.DATABASE_URL, echo=True)

SQLModel.metadata.create_all(engine)


@pytest.fixture(name="session")
def session_fixture():
    with Session(engine) as session:
        yield session

